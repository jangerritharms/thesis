\chapter{Related work}
In the previous two chapters we have shown that a need exists for a decentralized accounting system 
in order to create a global infrastructure for secure, anonymous digital transactions that does not 
require control through a trusted third party. This need has been identified before and work has 
been performed both in the scientific community as well as the industry. In this chapter we will 
summarize those efforts, describe the short-comings of those approaches and define a basis for the 
work performed in this work.

\section{Applications of decentralized accounting systems}
The general concept of accounting is quite old as it is simply a recording of transactions between
two or more parties. Before the digital age those recordings were simply written text on paper, 
nowadays those recordings are stored in databases. We are concerned with another type, namely 
decentralized accounting systems. We identified three types of applications for decentralized 
accounting systems: cryptocurrencies, distributed work systems and reputation systems. 

\subsection{Cryptocurrencies}
In the years 2007 and 2008 the global financial crisis shattered the global economy, lead to many
people loosing house and job and diminished the trust clients had in banks to keep their money safe.
Politics discussed the problem and proposed to regulate the banks more but with little impact. 
However something else promised to change the banking world: the first white-paper for a 
decentralized digital currency without any need for a trusted third party, Bitcoin, was announced. 

\paragraph{Bitcoin.}
Before the announcement of Bitcoin it was assumed that in order to verify the correctness of 
transactions between parties and prevent cheating with digital money a bank or credit card company
was needed. Bitcoin proved them wrong by creating a hash-based chain of transaction blocks, a global 
ledger, that is shared among all users of the network. The acceptance of transactions is managed by 
a process called ``mining'' which ensures that only the majority of CPU power can publish new 
block. A blocks contains a fixed number of transactions and the Bitcoin network makes sure that a
block is created once every 10 minutes. All mining node will execute the proof-of-work mechanism: 
in order to publish a block a value needs to be found that, when hashed with a certain hashing 
function like SHA-256, starts with a certain number of zeros. Depending on how many CPUs are active
on the network the problem can be increased in difficulty by requiring more zeros at the beginning 
of the hashed value. Once a new block is published other nodes will validate the transactions and 
if they agree, will show their acceptance by working on creating the next block. This system ensures
that as long as a majority of CPU power is owned by honest nodes, they will outpace the rest of the
network in solving the hashing puzzle and creating valid blocks. Nodes will accept the longest chain
and the transactions will be valid.

The Bitcoin approach solved many problems assuming that an honest majority exists: first and 
foremost the double-spending of funds is prevented because the Bitcoin blockchain creates one global
order of valid transactions. Also the Sybil-attack is prevented by pairing the voting power to the
available CPU power, which means Sybils can only run on real hardware, removing the advantage of
fake identities. But these measures of attack prevention come at a price of efficiency. The surging 
price of Bitcoins especially in the year 2017 led to a surge in transactions, transaction fees and
energy usage. The increasing price of Bitcoins makes mining them more profitable which means more 
nodes are joining the mining operation. Therefore the difficulty for the proof-of-work problem is 
increased, such that it takes more computing power to find a correct value. This again increases the
amount energy consumed in the whole network. At the same time the number of transactions processed
is a constant of the Bitcoin currency, approximately 7 transactions per second. At the time of 
writing the energy conusmption is at least 2.55 GW which makes it comparable to contries such as 
Ireland. Summarized Bitcoin was a large step towards decentralized accounting but unsolved 
scalability issues still prevent it from being actually useful as an infrastructure such as the one 
we envision.

\paragraph{Alternative coins and improvement measures.}
Bitcoin served as a first proof-of-concept for trustless digital currencies or for our purposes, a
``secure'' decentralized accounting system, but the shortcomings were also obvious. Once the 
populartiy increased, other enthousiasts, startups and incumbent companies started to create their 
own spin-off digital currency. Each of these so-called ``alternative coins'' used blockchains as 
a core technology to store transactions but tried to solve the scalability issues using different 
approaches. The discussion of all alternative coins goes beyond the scope of this chapter, therefore
we will quickly introduce some of the main differences between the largest systems. 

The block time is one parameter to tweak in order to increase transaction throughput. Ethereum, the
second largest cryptocurrencies currently uses a block time of 15 seconds with a proof-of-work 
consensus. Also block size is a factor in the throughput rate, but increasing block time and size 
only creates a constant factor to the rate of transactions.

Ethereum is currently testing a proof-of-stake mechanism which should replace the energy intesive 
proof-of-work. In short this mechanism will require ``minders'' to put some amount of currency into
a wallet in order to participate in the process. If a miner does not perform the validation of 
transactions correctly that ``stake'' will be lost for the miner. This will solve the energy 
consumption problem but it will not solve the overall scalability issue of the system. 

Another feature in development in multiple currencies is the ``Lightning network''. The lightning 
network will allow two parties that expect to conduct multiple transactions with each other to 
create a ``channel''. Both parties store some funds in the channel and can then interact freely 
through this channel without needing to interact with the master network of the currency. Only the
opening and netbalance at closing time will be writting to the chain while all other interactions 
are only recorded locally. This should increase the possible throughput significantly but due to the
early stages of development the actual implications of large-scale use are not proven at the time of
writing. But considering that Bitcoin has a transaction limit of 200000 transactions a day, it would 
still take 5000 days or 13.7 years to open one channel each for a billion people.

The IOTA project ...

Sharding ...

Conclusion


\subsection{Distirubted work systems}
In the field of distributed computing many applications include some mechanism in which a node is
performing work for other nodes or the network in general. Seuken et al. call these distributed 
work systems. Some examples of distributed work systems are peer-to-peer file-sharing network,
packet forwarding in mobile ad-hoc networks and volunteer scientific distributed computing. As our 
research group is mostly concerned with file-sharing networks and the concepts are similar in 
general we will stick to that example to discuss the latest developments.

Many different file-sharing networks have been built in the past, the most prominent being Napster,
Gnutella and BitTorrent. In contrast to centralized file-sharing, in peer-to-peer systems there is 
no server that contains all data, but instead users share data directly, one peer downloading and 
one peer uploading. With no infrastructure needed, no costs and no single point of failure such a
systems seems optimal. Talking in terms of distributed work systems, the act of uploading is 
equivalent of performing work while the act of downloading consumes work. There is, however, a 
social dilemma here: uploading to another node does not lead to an immediate reward for the
uploading node, therefore, if we assume that bandwidth is a precious resource it is cheaper to not 
upload, yet if all agents on the network realize this, no agent will upload and thus no agent is 
able to download. The agents that do not upload any data are known as free-riders and free-rider 
protection in peer-to-peer file-sharing networks is a subject of ongoing research.

Accounting systems pose a possible solution to the free-riding problem. Let's first imagine a 
centralized accounting systems keeping track of all uploading and downloading behavior, uploading 
data increases the balance of agents, downloading decreases the balance. Now, the accounting system
can enforce that agents keep their balance around 0, so they upload approximately as much as they
download. Therefore, an accounting system can solve the free-riding problem, however as mentioned 
multiple times, a decentralized accounting system is hard to implement. Accounting mechanisms have
first been related with this subject in the DropEdge paper, however a lot of work has been done on
the very related subject of reputation systems, which will be discussed in the next section. Seuken
et al. define an incentive-compatible accounting mechanism which removes any advantage for users 
that misreport their own contributions in the network. They present their DropEdge algorithm and 
show that it's possible to increase the efficiency of BitTorrent clients using accounting. A 
negative result of their work is that an accounting mechanism cannot prevent sybil attacks. Some
short-comings of the approach is strategic manipulations of data and dissemination of data. 

\subsection{Reputation systems}
One of the reasons that decentralized accounting systems are hard to create is that agents in
peer-to-peer applications do not have a complete view of the network and thus also not all 
information of the network, at least not without a global consensus mechanism. In the file-sharing
example from the previous section agents decide to upload to other agents based on some partial 
knowledge of the network and contributions of agents. It can be argued that an accounting mechanism
cannot be correct if it acts on partial information and instead the particular balance of an agent 
as seen by another agent is rather a reputation. The goal is then to create trust between users in 
order to facilitate cooperation. Such a system will be called a reputation system. 

Whether reputation systems can be called an application of accounting systems can be argued about. 
In general accounting systems track transactions between accounts, the full history of transactions
determines the state of the network. According the framework of Mui et al. trust is the expectation
of reciprocation for an agent given that agent's history of behavior. So a reputation system can act 
on the data of an accounting system and add additional conclusions. The previous example of agents
uploading and downloading helps to understand this. An accounting system keeps track of the 
transactions and calculates the balance of an agent, for example +10MB, for an agent that has 
uploaded 10MB more than downloaded. Also it is possible to account the total uploaded and downloaded
data, for example 1010MB and 1000MB respectively. A simple accounting system stops at this point, 
the system behaves correctly when no error has been done in calculating the balances and the data is
correct. A reputation system adds another layer of interpretation to this data. The simplest 
reputation function only checks whether the balance is positive or not, or if the choice is between
multiple agents, whose balance is the most positive. Another reputation function might weight agents
with a 0 balance but 10GB of uploaded (and downloaded) data more trustworthy than an agent with 10MB
positive balance but only 100MB uploaded data. Thus we can see a reputation system as a layer on top
of an accounting system.

Describe some reputation systems ...

\section{TrustChain}
TrustChain was built as a system to create trust between two strangers

\subsection{Data structure}
\subsection{Accounting mechanism}
\paragraph{Definition of trust and reputation}
\subsection{Subjective graph}
\subsection{Consensus}

